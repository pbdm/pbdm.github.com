## 数据收集

* 白屏时间：用户从打开页面开始到页面开始有东西呈现为止，这过程中占用的时间就是白屏时间

```
<!DOCTYPE HTML>
<html>
  <head>
    <script>
      var perf = {};
      var perf.start_time = +new Date; //测试时间起点，实际统计起点为 DNS 查询
    </script>
    <script src="example.js"></script>
    <script>
      var perf.end_time = +new Date; //时间终点
      var perf.headtime = end_time - start_time; //头部资源加载时间(白屏时间)
    </script>
  </head>
  <body>
    <p>test</p>
  </body>
</html>
```
* 首屏时间：用户浏览器首屏内所有内容都呈现出来所花费的时间
需要绑定所有图片的 load 事件, 判断图片是否在首屏显示, 取 load 最晚的值

* 用户可操作时间：用户可以进行正常的点击、输入等操作
```
document.addEventListener('DOMContentLoaded', function() {
  perf.domReadyTime = +new Date;
})
```
* 页面总下载时间：页面所有资源都加载完成并呈现出来所花的时间，即页面 onload 的时间
```
window.addEventListener('load', function() {
  perf.load = +new Date;
  // make log here
  // chrome里可以使用 `performance.timing`
})
```

> http://caniuse.com/#search=timing

样本量庞大,收集的时候是否需要过滤?

运维在这里的角色?!

## 渲染相关

## 数据落地
基于 bi 的打点系统

## 数据分析
白屏,首屏, 可操作, 总下载

## 第三方工具
> https://gtmetrix.com/
> http://www.mmtrix.com/


> http://fex.baidu.com/blog/2014/05/build-performance-monitor-in-7-days/
